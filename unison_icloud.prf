# Unison profile for iCloud sync
# Syncs between local sync hub and iCloud (Obsidian documents)

# Sync directories
root = /Users/moatasimfarooque/Sync_Hub_New
root = /Users/moatasimfarooque/Library/Mobile Documents/iCloud~md~obsidian/Documents/Sync

# Basic sync options
auto = true
batch = true
prefer = newer
log = true
silent = false

# Conflict resolution
backup = Name *
backupcurr = Name *
backupnot = Name *.tmp
maxbackups = 5

# Standard ignore patterns
ignore = Name .DS_Store
ignore = Name .localized
ignore = Name .Spotlight-V100
ignore = Name .Trashes
ignore = Name .fseventsd
ignore = Name .TemporaryItems
ignore = Name *.tmp
ignore = Name *.swp
ignore = Name *~
ignore = Name .#*
ignore = Name #*#

# iCloud specific ignores
ignore = Name *.icloud
ignore = Name .com.apple.timemachine.donotpresent

# Common problematic file patterns
ignore = Regex .*:.*
ignore = Regex .*".*
ignore = Regex .*<.*
ignore = Regex .*>.*
ignore = Regex .*\|.*
ignore = Name *.lock
ignore = Name *.lnk
ignore = Name desktop.ini
ignore = Name Thumbs.db
ignore = Name *conflicted copy*
ignore = Name *conflict*

# Ignore emoji-named directories that can cause sync issues
ignore = Name 🎯*
ignore = Name 💻*
ignore = Name 📊*
ignore = Name 📚*
ignore = Name 📝*
ignore = Regex .*[🎯💻📊📚📝].*

# Version control and sync service files
ignore = Name .git
ignore = Name .gitignore
ignore = Name .sync*
ignore = Name .dropbox*

# Obsidian files that might cause conflicts
ignore = Name .obsidian*

# Performance settings
retry = 3
confirmbigdel = false
fastcheck = true
fastcheck = true
times = true
perms = 0o644

# Performance optimizations for large datasets
maxthreads = 4
rsrc = false
copythreshold = 1000

# Exclude large file types that slow down sync
ignore = Name *.pdf
ignore = Name *.PNG
ignore = Name *.png
ignore = Name *.jpg
ignore = Name *.jpeg
ignore = Name *.mp4
ignore = Name *.mov
ignore = Name *.epub
ignore = Name *.zip
ignore = Name *.tar.gz
ignore = Name *.dmg

# Exclude common large directories
ignore = Path converted_images
ignore = Path */converted_images
ignore = Path random_forest_images
ignore = Path */random_forest_images
ignore = Path extracted_images
ignore = Path */extracted_images
ignore = Path images
ignore = Path */images
ignore = Path media
ignore = Path */media

# Exclude temporary and cache directories
ignore = Path .obsidian/plugins/*/
ignore = Path .smart-env
ignore = Path */cache
ignore = Path */temp
ignore = Path */tmp

# Network optimization
# servercmd = timeout 60s unison  # Disabled - causes syntax issues
# clientHostName = localhost

# Backup and versioning
backup = Name *
backupcurr = Name *
maxbackups = 3
backupnot = Name *.tmp
backupnot = Name *.lock